<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Blurry Loading</title>
    <style>
            * {
        box-sizing: border-box;
      }

      body {
        font-family: sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100vh;
        overflow: hidden;
        margin: 0;
      }

      .bg {
        background: url('https://images.unsplash.com/photo-1576161787924-01bb08dad4a4?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2104&q=80')
          no-repeat center center/cover;
        position: absolute;
        top: -30px;
        left: -30px;
        width: calc(100vw + 60px);
        height: calc(100vh + 60px);
        z-index: -1;
        filter: blur(0px);
      }

      .loading-text {
        font-size: 50px;
        color: #fff;
      }
    </style>
  </head>
  <body>
    <section class="bg"></section>
    <div class="loading-text">0%</div>
  </body>
    <script>
    // 需求：当载入页面，页面中的背景图片随时间逐渐清晰，百分比字逐渐淡出 
    // 分析：
    // ① 设定一个变量，从0开始
    let i = 0
    // ②设定一个定时器，每个30毫秒执行一次
    let x = setInterval(() => {
      if (i < 100){i++}else{clearInterval(x)} // 当变量到99时停止定时器++
      document.querySelector('.loading-text').style.opacity = 1 - i / 100
      document.querySelector('.loading-text').innerText = `${i}%`
      document.querySelector('.bg').style.filter = `blur(${30 * (1-i/100)}px)`
    },30)
    // ③每次执行时让变量自增，并将变量值赋给百分比字的透明度属性，同时用变量计算出一个模糊值赋给背景的模糊属性。变量到99时则停止定时器。



    </script>
</html>
